{{ define "main" }}
<h1 class="d-title">{{ .Title }}</h1>

{{ with .Params.image }}
  {{ $img := strings.TrimPrefix "/" . }}
  <div class="d-hero">
    <img class="d-hero-img" src="{{ $img | relURL }}" alt="{{ $.Title }}">
  </div>
{{ end }}

<p class="d-line">
  名前：{{ .Title }}（{{ .Params.attack_type }}・{{ .Params.attack_range }}・{{ .Params.element }}）
</p>

<section class="d-block">
  <div class="d-level">
    <div class="d-level-row" style="display:flex; gap:10px; align-items:center; flex-wrap:wrap;">
      <div class="d-level-row" style="display:flex; gap:6px; flex-wrap:wrap;">
        {{ with .Params.level_shortcuts }}
          {{ range . }}
            <button class="d-btn" type="button" data-lv="{{ . }}">Lv {{ . }}</button>
          {{ end }}
        {{ else }}
          <button class="d-btn" type="button" data-lv="1">Lv 1</button>
          <button class="d-btn" type="button" data-lv="700">Lv 700</button>
        {{ end }}
      </div>

      <label class="d-input" style="display:flex; align-items:center; gap:6px;">
        <input id="origin-exp" type="checkbox">
        経験の起源
      </label>
    </div>

    <div class="d-level-row">
      <label class="d-input">
        Lv <input id="monster-level" type="number" min="1" value="1">
      </label>
    </div>
  </div>
</section>

<section class="d-block">
  <h2 class="d-h2">ステータス</h2>

  <dl class="d-list" id="status-table">
    <div class="d-row"><dt>vit</dt><dd data-stat="vit" data-base="{{ .Params.status.vit }}">{{ .Params.status.vit }}</dd></div>
    <div class="d-row"><dt>spd</dt><dd data-stat="spd" data-base="{{ .Params.status.spd }}">{{ .Params.status.spd }}</dd></div>
    <div class="d-row"><dt>atk</dt><dd data-stat="atk" data-base="{{ .Params.status.atk }}">{{ .Params.status.atk }}</dd></div>
    <div class="d-row"><dt>int</dt><dd data-stat="int" data-base="{{ .Params.status.int }}">{{ .Params.status.int }}</dd></div>
    <div class="d-row"><dt>def</dt><dd data-stat="def" data-base="{{ .Params.status.def }}">{{ .Params.status.def }}</dd></div>
    <div class="d-row"><dt>mdef</dt><dd data-stat="mdef" data-base="{{ .Params.status.mdef }}">{{ .Params.status.mdef }}</dd></div>
    <div class="d-row"><dt>luk</dt><dd data-stat="luk" data-base="{{ .Params.status.luk }}">{{ .Params.status.luk }}</dd></div>

    {{ with .Params.fixed_status.mov }}
      <div class="d-row"><dt>mov</dt><dd data-stat="mov" data-base="{{ . }}">{{ . }}</dd></div>
    {{ end }}
  </dl>
</section>

<section class="d-block">
  <h2 class="d-h2">報酬・捕獲</h2>
  <dl class="d-list">
    <div class="d-row"><dt>獲得経験値</dt><dd id="exp-value" data-base="{{ .Params.exp }}">{{ .Params.exp }}</dd></div>
    <div class="d-row"><dt>獲得ゴールド</dt><dd>{{ .Params.gold }}</dd></div>
    <div class="d-row"><dt>捕獲率</dt><dd>{{ .Params.capture_rate }}%</dd></div>
  </dl>
</section>

{{ with .Params.drops }}
<section class="d-block">
  <h2 class="d-h2">ドロップ</h2>
  <ul class="d-bullets">
    {{ range . }}
      <li>{{ . }}</li>
    {{ end }}
  </ul>
</section>
{{ end }}

<section class="d-block" id="pet-skill-section"
  data-monster-id="{{ .Params.id }}"
  data-json-url="{{ "db/pet-skills.json" | relURL }}">
  <h2 class="d-h2">ペットスキル</h2>
  <dl class="d-list" id="pet-skill-list">
    <div class="d-row"><dt>Lv31</dt><dd>読み込み中…</dd></div>
  </dl>
</section>

{{ with .Params.locations }}
<section class="d-block">
  <h2 class="d-h2">出現場所</h2>
  <p class="d-places">
    {{ range $i, $v := . }}{{ if $i }} / {{ end }}{{ $v }}{{ end }}
  </p>
</section>
{{ end }}

<p class="d-back">
  <a href="{{ .CurrentSection.RelPermalink }}">← モンスター一覧に戻る</a>
</p>

<script defer src="{{ "js/pet-skills.js" | relURL }}"></script>
<script defer src="{{ "js/monster-level.js" | relURL }}"></script>
{{ end }}
